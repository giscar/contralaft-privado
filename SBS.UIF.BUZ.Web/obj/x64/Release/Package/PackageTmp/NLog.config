<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      autoReload="false" throwExceptions="false"
      internalLogLevel="Trace"
      internalLogFile="C:\Inetpub\tools\Nlog.log">

  <!-- make sure to set 'Copy To Output Directory' option for this file -->
  <!-- go to http://nlog-project.org/wiki/Configuration_file for more information -->

  <targets>
    <target name="logDatabase1" xsi:type="Database"
            dbProvider="Oracle.DataAccess.Client.OracleConnection, Oracle.DataAccess, Version=10.1.0.400, Culture=neutral, PublicKeyToken=89b483f429c47342"
            connectionString="Data Source=prod;Persist Security Info=True;User ID=jtovar;Password=jtovar2016;Pooling=true"
            commandText="insert into GTI_APP_LOGS ( log_id, log_application, log_date, log_level, log_logger, log_message, log_machine_name, log_user_name, log_call_site, log_thread, log_exception, log_stacktrace ) values ( SEQ_GTI_APP_LOG.Nextval, :nombre_aplicacion, :fecha_hora_log, :nivel, :nombre_logger, :mensaje, :nombre_host, :nombre_usuario, :sitio_llamada, :id_hilo, :excepcion, :pila_mensaje )">
      <parameter name="nombre_aplicacion" layout="SISDEL (Local)" />
      <parameter name="fecha_hora_log" layout="${longdate}" />
      <parameter name="nivel" layout="${level} "/>
      <parameter name="nombre_logger" layout="${logger}" />
      <parameter name="mensaje" layout="${message}" />
      <parameter name="nombre_host" layout="${machinename}" />
      <parameter name="nombre_usuario" layout="${windows-identity:domain=true}"/>
      <parameter name="sitio_llamada" layout="${callsite:filename=true}"/>
      <parameter name="id_hilo" layout="${threadid}"/>
      <parameter name="excepcion" layout="${exception:format=tostring}"/>
      <parameter name="pila_mensaje" layout="${stacktrace}"/>
    </target>
    <!--<target name="logFile1" xsi:type="File" fileName="SGDEA.log"
            layout="${date:format=yyyy-MM-dd HH:mm:ss} ${callsite:className=true:includeSourcePath=true:methodName=true} ${message}" />-->
    <!--
    <target name="logDatabase1" xsi:type="Database"
            dbProvider="Oracle.DataAccess.Client.OracleConnection, Oracle.DataAccess, Version=10.1.0.400, Culture=neutral, PublicKeyToken=89b483f429c47342"
            dbProvider="System.Data.OracleClient.OracleConnection, System.Data.OracleClient, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
            connectionString="Data Source=prod;Persist Security Info=True;User ID=jtovar;Password=jtovar;Pooling=true">
      <commandText>
        insert into GTI_APP_LOGS (log_date, log_level, log_logger, log_message, log_machine_name, log_user_name, log_call_site, log_thread, log_exception, log_stacktrace )
                          values ( @time_stamp, @level, @logger, @message, @machinename, @user_name, @call_site, @threadid, @log_exception, @stacktrace );
      </commandText>
      <parameter name="@time_stamp" layout="${longdate}"/>
      <parameter name="@level" layout="${level}"/>
      <parameter name="@logger" layout="${logger}"/>
      <parameter name="@message" layout="${message}"/>
      <parameter name="@machinename" layout="${machinename}"/>
      <parameter name="@user_name" layout="${windows-identity:domain=true}"/>
      <parameter name="@call_site" layout="${callsite:filename=true}"/>
      <parameter name="@threadid" layout="${threadid}"/>
      <parameter name="@log_exception" layout="${exception}"/>
      <parameter name="@stacktrace" layout="${stacktrace}"/>
    </target>
    -->
  </targets>
  
  <rules>
    <!--<logger name="*" minlevel="Trace" writeTo="logFile1" />-->
    <logger name="*" minlevel="Info" writeTo="logDatabase1" />
  </rules>
  
</nlog>
